#!/usr/bin/env bash

inc=${1:-10}

# Get current volume percentage
currentVolume=$(wpctl get-volume @DEFAULT_AUDIO_SINK@ | awk '{print int($2 * 100)}')

# Calculate next volume (capped at 100%)
nextVolume=$(python -c "x=$currentVolume+$inc; print(max(min(x,100), 0))")

# Unmute and set volume
wpctl set-mute @DEFAULT_AUDIO_SINK@ 0
wpctl set-volume @DEFAULT_AUDIO_SINK@ "${nextVolume}%"

# Send notification
notify-send -t 1000 -h int:value:$nextVolume -h string:synchronous:volume "Volume: ${nextVolume}%"
